<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:fa="using:FluentAvalonia.UI.Controls"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="500"
        x:Class="SteamDebloat.ProgressWindow"
        Title="Progress"
        Width="600" Height="500"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Background="#1E1E1E"
        Icon="/Assets/Icons/icon.ico">

    <Grid RowDefinitions="*,Auto">
        <!-- Content -->
        <Grid Grid.Row="0" Margin="30" RowDefinitions="Auto,Auto,Auto,*,Auto">
            
            <!-- Icon -->
            <Viewbox x:Name="StatusIcon"
                   Grid.Row="0"
                   Width="72"
                   Height="72"
                   HorizontalAlignment="Center" 
                   Margin="0,20,0,30">
                <!-- Play Icon (Start) -->
                <Path x:Name="StatusIconPath"
                      Data="M232,112a8,8,0,0,1-3.56,6.66l-128,88A8,8,0,0,1,88,200V56a8,8,0,0,1,12.44-6.66l128,88A8,8,0,0,1,232,112Z" 
                      Fill="{DynamicResource SystemFillColorSuccessBrush}" 
                      Stretch="Uniform"/>
            </Viewbox>

            <!-- Title -->
            <TextBlock x:Name="StatusTitle"
                      Grid.Row="1"
                      Text="Processing..." 
                      FontSize="24" 
                      FontWeight="Bold" 
                      HorizontalAlignment="Center" 
                      Margin="0,0,0,10"/>

            <!-- Current Status -->
            <TextBlock x:Name="CurrentStatus"
                      Grid.Row="2"
                      Text="Initializing..." 
                      FontSize="14"
                      Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                      HorizontalAlignment="Center"
                      TextAlignment="Center"
                      Margin="0,0,0,30"
                      TextWrapping="Wrap"/>

            <!-- Progress Log -->
            <Border Grid.Row="3"
                   Background="#252526"
                   BorderBrush="#3F3F46"
                   BorderThickness="1"
                   CornerRadius="8"
                   Margin="0,0,0,20">
                <ScrollViewer x:Name="LogScrollViewer" 
                             VerticalScrollBarVisibility="Auto"
                             Padding="15">
                    <StackPanel x:Name="LogPanel"/>
                </ScrollViewer>
            </Border>

            <!-- Progress Bar -->
            <ProgressBar Grid.Row="4"
                        x:Name="ProgressBar"
                        Height="8"
                        IsIndeterminate="True"
                        Margin="0,0,0,10"/>
        </Grid>

        <!-- Bottom Buttons -->
        <Border Grid.Row="1" 
               BorderBrush="#3F3F46" 
               BorderThickness="0,1,0,0"
               Background="#252526"
               Padding="30,20">
            <Grid>
                <Button x:Name="CancelButton"
                        Content="Cancel" 
                        HorizontalAlignment="Left"
                        MinWidth="120"
                        Height="40"
                        Click="CancelButton_Click"
                        IsVisible="True"/>
                
                <Button x:Name="CloseButton"
                        Content="Close" 
                        Classes="accent"
                        HorizontalAlignment="Right"
                        MinWidth="120"
                        Height="40"
                        Click="CloseButton_Click"
                        IsVisible="False"/>
            </Grid>
        </Border>
    </Grid>
</Window>
