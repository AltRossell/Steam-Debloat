<Window x:Class="SteamDebloat.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Steam Debloat" Height="550" Width="900"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{DynamicResource MaterialDesignFont}"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Main Content -->
        <Grid Grid.Row="0" Margin="24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="400"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Configuration -->
            <materialDesign:Card Grid.Column="0" Margin="0,0,12,0" materialDesign:ShadowAssist.ShadowDepth="Depth2">
                <StackPanel Margin="24">
                    <TextBlock Text="Configuration" FontSize="18" FontWeight="Bold" Margin="0,0,0,24"/>
                    
                    <!-- Mode Selection -->
                    <TextBlock Text="Optimization Mode:" FontWeight="Medium" Margin="0,0,0,8"/>
                    <ComboBox Name="ModeComboBox" materialDesign:HintAssist.Hint="Select mode" 
                              Style="{StaticResource MaterialDesignComboBox}" Margin="0,0,0,24"
                              SelectionChanged="ModeComboBox_SelectionChanged">
                        <ComboBoxItem Content="Normal 2025 July (Recommended)" Tag="Normal2025July"/>
                        <ComboBoxItem Content="Normal 2022 Dec" Tag="Normal2022dec"/>
                        <ComboBoxItem Content="Lite 2022 Dec" Tag="Lite2022dec"/>
                        <ComboBoxItem Content="Both versions (Experimental)" Tag="NormalBoth2022-2025"/>
                    </ComboBox>

                    <!-- Options -->
                    <TextBlock Text="Options:" FontWeight="Medium" Margin="0,0,0,8"/>
                    <CheckBox Name="CreateDesktopShortcut" Content="Create desktop shortcut" 
                              IsChecked="True" Margin="0,8"/>
                    <CheckBox Name="CreateStartMenuShortcut" Content="Add to start menu" 
                              IsChecked="False" Margin="0,8"/>
                    <CheckBox Name="RemoveFromStartup" Content="Remove Steam from Windows startup" 
                              IsChecked="True" Margin="0,8"/>
                    <CheckBox Name="UpdateSteam" Content="Update Steam automatically" 
                              IsChecked="True" Margin="0,8"/>

                    <!-- Action Buttons -->
                    <Button Name="StartButton" Content="OPTIMIZE STEAM" 
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Background="{DynamicResource PrimaryHueMidBrush}"
                            materialDesign:ButtonAssist.CornerRadius="8"
                            Height="48" Margin="0,24,0,8" FontSize="14" FontWeight="Bold"
                            Click="StartButton_Click"/>
                    
                    <Button Name="UninstallButton" Content="UNINSTALL OPTIMIZATION"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            BorderBrush="Gray"
                            Foreground="Gray"
                            Background="Transparent"
                            materialDesign:ButtonAssist.CornerRadius="8"
                            Height="40" Margin="0,8,0,0" FontSize="12" FontWeight="Medium"
                            Click="UninstallButton_Click"/>
                </StackPanel>
            </materialDesign:Card>

            <!-- Right Panel - System Info -->
            <materialDesign:Card Grid.Column="1" Margin="12,0,0,0" materialDesign:ShadowAssist.ShadowDepth="Depth2">
                <StackPanel Margin="24">
                    <TextBlock Text="System Information" FontSize="18" FontWeight="Bold" Margin="0,0,0,24"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Operating System:" FontWeight="Medium" Margin="0,4"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Name="OSVersionText" Text="Loading..." Margin="8,4"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Architecture:" FontWeight="Medium" Margin="0,4"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Name="OSArchText" Text="Loading..." Margin="8,4"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Steam Path:" FontWeight="Medium" Margin="0,4"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Name="SteamPathText" Text="Searching..." Margin="8,4" TextWrapping="Wrap"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Steam V2 Path:" FontWeight="Medium" Margin="0,4" Name="SteamV2Label" Visibility="Collapsed"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Name="SteamV2PathText" Text="N/A" Margin="8,4" Visibility="Collapsed" TextWrapping="Wrap"/>
                        
                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Steam.CFG:" FontWeight="Medium" Margin="0,4"/>
                        <TextBlock Grid.Row="4" Grid.Column="1" Name="SteamConfigText" Text="Searching..." Margin="8,4"/>
                    </Grid>
                    
                    <!-- Admin Status -->
                    <Border BorderBrush="{DynamicResource MaterialDesignDivider}" BorderThickness="1" 
                            CornerRadius="4" Padding="12" Margin="0,24,0,0">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Name="StatusIcon" Kind="ShieldAlert" 
                                                   Width="20" Height="20" Foreground="Orange" Margin="0,0,8,0"/>
                            <TextBlock Name="AdminStatusText" Text="Checking permissions..." VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Version Info -->
                    <Border BorderBrush="{DynamicResource MaterialDesignDivider}" BorderThickness="1" 
                            CornerRadius="4" Padding="12" Margin="0,16,0,0">
                        <StackPanel>
                            <TextBlock Text="Steam Debloat" FontWeight="Bold" FontSize="14" Margin="0,0,0,4"/>
                            <TextBlock Text="Version 1.915.2300" FontSize="12" Opacity="0.7" Margin="0,0,0,4"/>
                            <TextBlock Text="Developed by Github.com/AltRossell" FontSize="11" Opacity="0.6"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </materialDesign:Card>
        </Grid>

        <!-- Progress Overlay -->
        <Grid Name="ProgressOverlay" Grid.Row="0" Background="#C0000000" 
              Visibility="Collapsed" Panel.ZIndex="1000">
            <materialDesign:Card VerticalAlignment="Center" HorizontalAlignment="Center" 
                               Margin="32" Padding="32" MinWidth="350">
                <StackPanel>
                    <TextBlock Name="ProgressText" Text="Processing..." 
                               HorizontalAlignment="Center" FontWeight="Medium" FontSize="16" Margin="0,0,0,16"/>
                    <ProgressBar IsIndeterminate="True" Height="6" Margin="0,0,0,16"/>
                    <Button Name="CancelButton" Content="CANCEL" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            HorizontalAlignment="Center" Margin="0,8,0,0"
                            Click="CancelButton_Click"/>
                </StackPanel>
            </materialDesign:Card>
        </Grid>
    </Grid>
</Window>