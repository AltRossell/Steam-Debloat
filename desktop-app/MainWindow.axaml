<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="SteamDebloat.MainWindow"
        Title="Steam Debloat"
        Width="950" Height="650"
        MinWidth="800" MinHeight="600"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <TabControl Margin="16">
            <!-- Installer Tab -->
            <TabItem Header="INSTALLER">
                <Grid Margin="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="400"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Configuration Panel -->
                    <ScrollViewer Grid.Column="0" Margin="0,0,16,0">
                        <StackPanel>
                            <TextBlock Text="Optimization Configuration" Classes="header"/>

                            <!-- Steam Directory Selection -->
                            <TextBlock Text="Steam Directory:" FontWeight="Medium" Margin="0,0,0,8"/>
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Name="SteamDirectoryTextBox"
                                         Watermark="Steam installation path"
                                         IsReadOnly="False" Margin="0,0,8,0"/>
                                <Button Name="BrowseSteamDirectoryButton" Grid.Column="1" Content="Browse"
                                        Width="80" Click="BrowseSteamDirectoryButton_Click"/>
                            </Grid>

                            <!-- Mode Selection -->
                            <TextBlock Text="Optimization Mode:" FontWeight="Medium" Margin="0,0,0,8"/>
                            <ComboBox Name="ModeComboBox" Margin="0,0,0,16"
                                      SelectionChanged="ModeComboBox_SelectionChanged">
                            </ComboBox>

                            <!-- Options -->
                            <TextBlock Text="Options:" FontWeight="Medium" Margin="0,0,0,8"/>
                            
                            <!-- Windows-only options -->
                            <CheckBox Name="CreateDesktopShortcut" Content="Create desktop shortcut"
                                      IsChecked="True" Margin="0,4"
                                      IsVisible="False"/>
                            <CheckBox Name="AddToStartMenu" Content="Add to Start Menu"
                                      IsChecked="True" Margin="0,4"
                                      IsVisible="False"/>
                            <CheckBox Name="RemoveFromStartup" Content="Remove Steam from system startup"
                                      IsChecked="True" Margin="0,4"
                                      IsVisible="False"/>
                            
                            <!-- Universal option -->
                            <CheckBox Name="UpdateSteam" Content="Update Steam automatically"
                                      IsChecked="True" Margin="0,4,0,20"/>

                            <!-- Install Button -->
                            <Button Name="StartButton" Content="OPTIMIZE STEAM"
                                    Classes="primary"
                                    HorizontalAlignment="Stretch"
                                    Height="48" FontSize="14"
                                    Click="StartButton_Click"/>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- System Information Panel -->
                    <ScrollViewer Grid.Column="1">
                        <StackPanel>
                            <!-- Tool Information -->
                            <Border BorderBrush="#3F51B5" BorderThickness="2"
                                    CornerRadius="8" Padding="16" Margin="0,0,0,16"
                                    Background="#F8F9FA">
                                <StackPanel>
                                    <TextBlock Text="Steam Debloat" FontSize="18" FontWeight="Bold"
                                               Foreground="#3F51B5" Margin="0,0,0,4"/>
                                    <TextBlock Text="Version 2.910.2100 by AltRossell" FontSize="12"
                                               Opacity="0.7" Margin="0,0,0,8"/>
                                    <TextBlock Text="Cross-platform Steam optimization tool for Windows and Linux"
                                               FontSize="13" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>

                            <TextBlock Text="System Information" Classes="header"/>

                            <!-- System Info Grid -->
                            <Border BorderBrush="#CCCCCC" BorderThickness="1"
                                    CornerRadius="4" Padding="16" Margin="0,0,0,16" Background="White">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Operating System:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Name="OSVersionText" Text="Loading..." Margin="0,2"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Architecture:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Name="OSArchText" Text="Loading..." Margin="0,2"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Administrator Status:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Name="AdminStatusText" Text="Checking permissions..." Margin="0,2"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Steam Path:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="3" Grid.Column="1" Name="SteamPathText" Text="Searching..." Margin="0,2" TextWrapping="Wrap"/>

                                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Steam Configuration:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="4" Grid.Column="1" Name="SteamConfigText" Text="Searching..." Margin="0,2" TextWrapping="Wrap"/>

                                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Platform:" FontWeight="Medium" Margin="0,2,12,2" Name="PlatformLabel"/>
                                    <TextBlock Grid.Row="5" Grid.Column="1" Name="PlatformText" Text="N/A" Margin="0,2" TextWrapping="Wrap"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </TabItem>

            <!-- Uninstaller Tab -->
            <TabItem Header="UNINSTALLER">
                <Grid Margin="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="400"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Uninstall Panel -->
                    <ScrollViewer Grid.Column="0" Margin="0,0,16,0">
                        <StackPanel>
                            <TextBlock Text="Remove Optimizations" Classes="header"/>

                            <TextBlock Text="Current Status:" FontWeight="Medium" Margin="0,0,0,8"/>
                            <Border BorderBrush="#CCCCCC" BorderThickness="1"
                                    CornerRadius="4" Padding="16" Margin="0,0,0,16" Background="White">
                                <StackPanel>
                                    <TextBlock Text="Steam Configuration:" FontWeight="Medium" Margin="0,0,0,4"/>
                                    <TextBlock Name="UninstallSteamConfigText" Text="Loading..." Margin="0,0,0,8"/>
                                </StackPanel>
                            </Border>

                            <TextBlock Text="Uninstall Options:" FontWeight="Medium" Margin="0,0,0,8"/>
                            <CheckBox Name="RestoreOriginalSettings" Content="Restore original Steam settings"
                                      IsChecked="True" Margin="0,4,0,20"/>

                            <!-- Uninstall Button -->
                            <Button Name="UninstallButton" Content="UNINSTALL OPTIMIZATION"
                                    Classes="danger"
                                    HorizontalAlignment="Stretch"
                                    Height="48" FontSize="14"
                                    Click="UninstallButton_Click"/>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- System Information Panel for Uninstaller -->
                    <ScrollViewer Grid.Column="1">
                        <StackPanel>
                            <!-- Tool Information -->
                            <Border BorderBrush="#FF5252" BorderThickness="2"
                                    CornerRadius="8" Padding="16" Margin="0,0,0,16"
                                    Background="#FFF5F5">
                                <StackPanel>
                                    <TextBlock Text="Steam Debloat" FontSize="18" FontWeight="Bold"
                                               Foreground="#FF5252" Margin="0,0,0,4"/>
                                    <TextBlock Text="Version 2.105.0200 by AltRossell" FontSize="12"
                                               Opacity="0.7" Margin="0,0,0,8"/>
                                    <TextBlock Text="Remove optimizations and restore Steam to original state"
                                               FontSize="13" TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>

                            <TextBlock Text="System Information" Classes="header"/>

                            <!-- System Info Grid (Uninstaller tab) -->
                            <Border BorderBrush="#CCCCCC" BorderThickness="1"
                                    CornerRadius="4" Padding="16" Margin="0,0,0,16" Background="White">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Operating System:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Name="OSVersionText2" Text="Loading..." Margin="0,2"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Architecture:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Name="OSArchText2" Text="Loading..." Margin="0,2"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Administrator Status:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Name="AdminStatusText2" Text="Checking permissions..." Margin="0,2"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Steam Path:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="3" Grid.Column="1" Name="SteamPathText2" Text="Searching..." Margin="0,2" TextWrapping="Wrap"/>

                                    <TextBlock Grid.Row="4" Grid.Column="0" Text="Steam Configuration:" FontWeight="Medium" Margin="0,2,12,2"/>
                                    <TextBlock Grid.Row="4" Grid.Column="1" Name="SteamConfigText2" Text="Searching..." Margin="0,2" TextWrapping="Wrap"/>

                                    <TextBlock Grid.Row="5" Grid.Column="0" Text="Platform:" FontWeight="Medium" Margin="0,2,12,2" Name="PlatformLabel2"/>
                                    <TextBlock Grid.Row="5" Grid.Column="1" Name="PlatformText2" Text="N/A" Margin="0,2" TextWrapping="Wrap"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Progress Overlay -->
        <Grid Name="ProgressOverlay" Background="#C0000000"
              IsVisible="False" ZIndex="1000">
            <Border Background="White"
                    VerticalAlignment="Center" HorizontalAlignment="Center"
                    Margin="32" Padding="32" MinWidth="350"
                    CornerRadius="8" BoxShadow="0 4 16 0 #30000000">
                <StackPanel>
                    <TextBlock Name="ProgressText" Text="Processing..."
                               HorizontalAlignment="Center" FontWeight="Medium" FontSize="16" Margin="0,0,0,16"/>
                    <ProgressBar IsIndeterminate="True" Height="6" Margin="0,0,0,16"/>
                    <Button Name="CancelButton" Content="CANCEL"
                            HorizontalAlignment="Center" Margin="0,8,0,0"
                            Click="CancelButton_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>